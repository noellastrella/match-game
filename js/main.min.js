(()=>{var draggables=[],draggablesClone=[];let attempts=0,correct=0,previous,answerRow=document.querySelector("#answers"),answers;function init(){document.querySelectorAll("#guess .col").forEach(e=>{e.addEventListener("drop",dropped),e.addEventListener("dragover",dragOver),e.addEventListener("dragenter",dragEnter)}),resetState()}function resetState(){createSet(),shuffle(),updateScores()}function shuffle(){attempts=0,correct=0,draggablesClone=(draggablesClone=[...draggables].map(e=>e.cloneNode(!0))).map((e,i)=>(e.setAttribute("id","answer-"+i),e)).map(value=>({value:value,sort:Math.random()})).sort((a,b)=>a.sort-b.sort).map(({value:value})=>value),document.querySelectorAll("#guess .col").forEach((e,i)=>{e.appendChild(draggables[i])}),document.querySelectorAll("#answers .col").forEach((e,i)=>{e.appendChild(draggablesClone[i])}),answers=document.querySelectorAll("#answers .col .dragme"),checkAnswers(answers)>0&&resetState()}function checkAnswers(){let matches=0;return console.log(answers),document.querySelectorAll("#guess .col .dragme").forEach((e,i)=>{e.dataset.val==answers[i].dataset.val&&matches++}),matches}function createSet(){draggables=[],document.querySelectorAll("#guess .col").forEach((e,i)=>{e.innerHTML=""}),document.querySelectorAll("#answers .col").forEach((e,i)=>{e.innerHTML=""}),document.querySelectorAll("#guess .col").forEach((e,i)=>{draggables[i]=createNew(i)}),updateScores()}function createNew(num){let randomColor=Math.floor(16777215*Math.random()).toString(16),el=document.createElement("div");return el.setAttribute("draggable","true"),el.setAttribute("id","drag-"+num),el.setAttribute("data-val",num),el.classList.add("dragme"),el.innerHTML="Drag Me"+num,el.setAttribute("style","background: #"+randomColor),el.addEventListener("dragstart",dragStart),el}function dropped(e){let id="#"+e.dataTransfer.getData("text/plain"),target=e.target;e.target.classList.contains("dragme")&&(target=e.target.parentNode),target.appendChild(previous),previousCol.appendChild(target.children[0]),e.stopPropagation()}function dragOver(e){e.preventDefault()}function dragEnter(e){e.preventDefault()}function dragStart(e){e.dataTransfer.setData("text/plain",e.target.id),previous=e.target,previousCol=e.target.parentNode}function updateScores(){document.querySelector("#attempts").innerText=attempts,document.querySelector("#correct").innerText=correct}document.querySelector("#restartGame").addEventListener("click",e=>{answerRow.classList.contains("hideAnswers")||answerRow.classList.add("hideAnswers"),resetState()}),document.querySelector("#checkAnswers").addEventListener("click",e=>{let total=answers.length;attempts++,correct=checkAnswers(),updateScores(),correct==total?answerRow.classList.contains("hideAnswers")&&answerRow.classList.remove("hideAnswers"):answerRow.classList.contains("hideAnswers")||answerRow.classList.add("hideAnswers")}),init()})();